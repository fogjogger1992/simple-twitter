(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ccbf6"],{"4ef5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"ma-0 px-0 d-flex flex-column",attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[r("v-card",{staticClass:"pa-3 font-weight-bold text-subtitle-1",staticStyle:{"border-bottom":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{tile:"",flat:""}},[e._v("帳戶設定")]),r("v-col",{staticClass:"ma-auto pa-4 align-self-center",attrs:{cols:"10",sm:"8",md:"7",lg:"6"}},[e.alertMsg?r("AlertErr",{attrs:{alertMsg:e.alertMsg},on:{"update:alertMsg":function(t){e.alertMsg=t},"update:alert-msg":function(t){e.alertMsg=t}}}):e._e(),r("v-form",{ref:"form",staticClass:"my-4 text-right",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:[e.rules.required,e.rules.accountRules],maxlength:"50",label:"帳號",required:""},model:{value:e.account,callback:function(t){e.account="string"===typeof t?t.trim():t},expression:"account"}}),r("v-text-field",{attrs:{rules:[e.rules.required,e.rules.nameRules],maxlength:"50",label:"姓名",required:""},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),r("v-text-field",{attrs:{rules:[e.rules.required,e.rules.emailRules],label:"Email",required:""},model:{value:e.email,callback:function(t){e.email="string"===typeof t?t.trim():t},expression:"email"}}),r("v-text-field",{attrs:{maxlength:"20",type:"password",rules:[e.rules.required,e.rules.passwordRules],label:"密碼"},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}}),r("v-text-field",{attrs:{maxlength:"20",type:"password",rules:e.confirmPasswordRules,label:"確認密碼"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword="string"===typeof t?t.trim():t},expression:"confirmPassword"}}),r("v-btn",{attrs:{rounded:"",disabled:!e.valid,color:"primary",loading:e.btnLoading},on:{click:e.updateSetting}},[e._v(" 儲存 ")])],1)],1)],1)],1)],1)},n=[],s=r("5530"),l=r("1da1"),o=(r("96cf"),r("b0c0"),r("0ef5")),c=r("4cce"),i=r("2f62"),u=r("2fa3"),d={name:"Setting",components:{AlertErr:o["a"]},data:function(){return{valid:!0,id:0,name:"",account:"",email:"",password:"",confirmPassword:"",alertMsg:"",btnLoading:!1,rules:{required:function(e){return!!e||"必填"},accountRules:function(e){return e&&e.length<=50||"帳號不得超過50個字"},nameRules:function(e){return e&&e.length<=50||"姓名不得超過50個字"},emailRules:function(e){return/.+@.+\..+/.test(e)||"Email格式無效，應為：xxx@xxx.xx"},passwordRules:function(e){return e&&e.length<=20||"密碼不得超過20個字"}}}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.setShowOverlayLoading(null,{root:!0}),t.next=4,e.fetchCurrentUser();case 4:e.setShowOverlayLoading(null,{root:!0}),e.id=e.currentUser.id,e.name=e.currentUser.name,e.account=e.currentUser.account,e.email=e.currentUser.email,t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),e.setShowOverlayLoading(null,{root:!0}),console.log("error",t.t0),console.error("can not fetch user information");case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},methods:Object(s["a"])(Object(s["a"])({updateSetting:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.form.validate(),t.prev=1,e.btnLoading=!0,r={name:e.name,account:e.account,email:e.email,password:e.password,checkPassword:e.confirmPassword},t.next=6,c["a"].updateSetting({userId:e.id,userData:r});case 6:if(a=t.sent,n=a.data,e.btnLoading=!1,"success"===n.status){t.next=12;break}throw e.alertMsg=n.message,new Error(n.message);case 12:return e.alertMsg="",u["a"].fire({icon:"success",title:"資料更新成功"}),t.next=16,e.fetchCurrentUser();case 16:e.name=e.currentUser.name,e.account=e.currentUser.account,e.email=e.currentUser.email,t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](1),e.btnLoading=!1,console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[1,21]])})))()}},Object(i["b"])({fetchCurrentUser:"fetchCurrentUser"})),Object(i["c"])({setShowOverlayLoading:"setShowOverlayLoading"})),computed:Object(s["a"])(Object(s["a"])({},Object(i["d"])(["currentUser"])),{},{confirmPasswordRules:function(){var e=[function(e){return!!e||"必填"},function(e){return e.length<=20||"密碼不得超過20個字"},this.password===this.confirmPassword||"兩次輸入的密碼不同"];return e}},Object(i["d"])({currentUser:function(e){return e.currentUser}}))},m=d,f=r("2877"),g=r("6544"),p=r.n(g),b=r("8336"),v=r("b0af"),w=r("62ad"),x=r("a523"),h=r("4bd4"),k=r("0fd9"),y=r("8654"),O=Object(f["a"])(m,a,n,!1,null,null,null);t["default"]=O.exports;p()(O,{VBtn:b["a"],VCard:v["a"],VCol:w["a"],VContainer:x["a"],VForm:h["a"],VRow:k["a"],VTextField:y["a"]})}}]);
//# sourceMappingURL=chunk-2d0ccbf6.511f1287.js.map