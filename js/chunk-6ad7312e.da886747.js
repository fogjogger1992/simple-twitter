(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ad7312e"],{"035c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-0 pa-0"},e._l(e.tweets,(function(t){return r("TweetCard",{key:t.id,attrs:{"initial-tweet":t},on:{"after-delete-like":e.afterDeleteLike}})})),1)},s=[],n=r("1da1"),i=r("5530"),c=(r("159b"),r("4de4"),r("96cf"),r("8f7b")),o=r("2f62"),l=r("4cce"),u=r("2fa3"),f={name:"UserLikes",components:{TweetCard:c["a"]},data:function(){return{user:{id:-1},tweets:[]}},computed:Object(i["a"])({},Object(o["d"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser(e),this.fetchLikes(e)},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchUser(a),this.fetchLikes(a),r()},methods:{fetchUser:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l["a"].getUser({userId:e});case 3:if(a=r.sent,s=a.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:n=s.id,t.user=Object(i["a"])(Object(i["a"])({},t.user),{},{id:n}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},fetchLikes:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l["a"].getUserLikes({userId:e});case 3:if(a=r.sent,s=a.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:n=[],s.forEach((function(e){e=Object(i["a"])(Object(i["a"])({},e),{},{isLiked:!0}),n.push(e)})),t.tweets=n,r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](0),u["a"].fire({icon:"error",title:"無法取得使用者推文，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))()},afterDeleteLike:function(e){var t=e;this.currentUser.id===this.user.id&&(this.tweets=this.tweets.filter((function(e){return e.id!==t})))}}},d=f,w=r("2877"),p=r("6544"),m=r.n(p),h=r("a523"),v=Object(w["a"])(d,a,s,!1,null,null,null);t["default"]=v.exports;m()(v,{VContainer:h["a"]})},"29a2":function(e,t,r){"use strict";r("c8a4")},"8f7b":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"pa-3",staticStyle:{"border-bottom":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{flat:"",tile:""}},[r("v-row",{staticClass:"pa-0",staticStyle:{"flex-wrap":"nowrap"},attrs:{"no-gutters":""}},[r("v-col",{staticClass:"flex-grow-1"},[r("router-link",{attrs:{to:{name:"user",params:{id:e.tweet.User.id}}}},[r("v-avatar",{staticClass:"mt-1"},[r("v-img",{attrs:{src:e._f("emptyImage")(e.tweet.User.avatar),alt:e.tweet.User.name}})],1)],1)],1),r("v-col",{staticClass:"flex-shrink-1",attrs:{cols:"11"}},[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"tweet",params:{id:e.tweet.id}}}},[r("v-row",{staticClass:"pa-2",attrs:{"no-gutters":"",align:"center"}},[r("p",{staticClass:"subtitle-2 font-weight-bold mr-1 my-0 pa-0"},[e._v(" "+e._s(e.tweet.User.name)+" ")]),r("p",{staticClass:"subtitle-2 grey--text font-weight-regular my-0 pa-0"},[e._v(" @"+e._s(e.tweet.User.account)+" ")]),r("p",{staticClass:"subtitle-2 font-weight-regular grey--text pa-0 my-0 ml-1"},[e._v(" ‧ "+e._s(e._f("fromNow")(e.tweet.createdAt))+" ")])]),r("v-row",{staticClass:"font-weight-normal px-2",attrs:{"no-gutters":"",align:"center"}},[r("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[r("p",{staticClass:"body-2 black--text font-weight-normal text-justify my-0"},[e._v(" "+e._s(e.tweet.description)+" ")])])],1)],1),r("v-row",{staticClass:"font-weight-normal pa-2",attrs:{"no-gutters":"",align:"center"}},[r("v-col",{staticClass:"d-flex justify-space-between mr-5",attrs:{cols:"1"}},[r("div",{staticClass:"d-flex align-center cursor-pointer",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.replyTweet.apply(null,arguments)}}},[r("v-icon",{staticStyle:{"font-size":"18px"},attrs:{color:"grey"}},[e._v("far fa-comment")]),r("p",{staticClass:"subtitle-2 font-weight-normal grey--text pa-0 my-0 ml-2"},[e._v(" "+e._s(e.tweet.replyCounts)+" ")])],1)]),r("v-col",{staticClass:"d-flex justify-space-between ml-5",attrs:{cols:"1"}},[r("div",{staticClass:"d-flex align-center",class:e.cursorStyle},[e.tweet.isLiked?r("v-icon",{staticStyle:{"font-size":"18px"},attrs:{disabled:e.currentUser.id===e.tweet.User.id,color:"red"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteLike(e.tweet.id)}}},[e._v("fas fa-heart")]):r("v-icon",{staticStyle:{"font-size":"18px"},attrs:{disabled:e.currentUser.id===e.tweet.User.id,color:"grey"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addLike(e.tweet.id)}}},[e._v("far fa-heart")]),r("p",{staticClass:"subtitle-2 grey--text pa-0 my-0 ml-2"},[e._v(" "+e._s(e.tweet.likeCounts)+" ")])],1)])],1)],1)],1)],1)},s=[],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("2708")),o=r("2f62"),l=r("4cce"),u=r("2fa3"),f={name:"TweetCard",props:{initialTweet:{type:Object,required:!0}},mixins:[c["b"],c["a"]],data:function(){return{tweet:Object(i["a"])({},this.initialTweet)}},computed:Object(i["a"])({cursorStyle:function(){return this.currentUser.id===this.tweet.User.id?"cursor-normal":"cursor-pointer"}},Object(o["d"])(["currentUser"])),methods:Object(i["a"])(Object(i["a"])({replyTweet:function(){this.setTweet(this.tweet),this.setTweetReplyDialogOpen(!0)}},Object(o["c"])({setTweet:"tweets/setTweet",setTweetReplyDialogOpen:"tweets/setTweetReplyDialogOpen"})),{},{addLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.tweet.User.id!==t.currentUser.id){r.next=5;break}return u["a"].fire({icon:"error",title:"無法將自己的推文加入LIKE"}),t.isLoading=!1,r.abrupt("return");case 5:return r.next=7,l["a"].addLike({tweetId:e});case 7:if(a=r.sent,s=a.data,"success"===s.status){r.next=11;break}throw new Error(s.message);case 11:t.tweet=Object(i["a"])(Object(i["a"])({},t.tweet),{},{isLiked:!0,likeCounts:t.tweet.likeCounts+1}),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log("error",r.t0),u["a"].fire({icon:"error",title:"無法將推文加入LIKE，請稍後再試"});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},deleteLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l["a"].deleteLike({tweetId:e});case 3:if(a=r.sent,s=a.data,"success"===s.status){r.next=7;break}throw new Error(s.message);case 7:t.tweet=Object(i["a"])(Object(i["a"])({},t.tweet),{},{isLiked:!1,likeCounts:t.tweet.likeCounts-1}),t.$emit("after-delete-like",e),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log("error",r.t0),u["a"].fire({icon:"error",title:"無法將推文移除LIKE，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}})},d=f,w=(r("29a2"),r("2877")),p=r("6544"),m=r.n(p),h=r("8212"),v=r("b0af"),b=r("62ad"),g=r("132d"),k=r("adda"),x=r("0fd9"),y=Object(w["a"])(d,a,s,!1,null,null,null);t["a"]=y.exports;m()(y,{VAvatar:h["a"],VCard:v["a"],VCol:b["a"],VIcon:g["a"],VImg:k["a"],VRow:x["a"]})},c8a4:function(e,t,r){}}]);
//# sourceMappingURL=chunk-6ad7312e.da886747.js.map