{"version":3,"sources":["webpack:///./src/views/UserLikes.vue?01a8","webpack:///src/views/UserLikes.vue","webpack:///./src/views/UserLikes.vue?cf24","webpack:///./src/views/UserLikes.vue","webpack:///./src/components/TweetCard.vue?c315","webpack:///./src/components/TweetCard.vue?ba46","webpack:///src/components/TweetCard.vue","webpack:///./src/components/TweetCard.vue?730c","webpack:///./src/components/TweetCard.vue?c209"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","tweet","key","id","attrs","on","afterDeleteLike","staticRenderFns","name","components","TweetCard","data","user","tweets","computed","created","fetchUser","fetchLikes","beforeRouteUpdate","next","methods","currentUser","filter","component","VContainer","staticStyle","params","User","_f","avatar","_v","_s","account","createdAt","description","$event","stopPropagation","preventDefault","replyTweet","apply","arguments","replyCounts","class","cursorStyle","isLiked","deleteLike","addLike","likeCounts","props","initialTweet","type","Object","required","mixins","setTweet","setTweetReplyDialogOpen","VAvatar","VCard","VCol","VIcon","VImg","VRow"],"mappings":"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","file":"js/chunk-6ad7312e.da886747.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"ma-0 pa-0\"},_vm._l((_vm.tweets),function(tweet){return _c('TweetCard',{key:tweet.id,attrs:{\"initial-tweet\":tweet},on:{\"after-delete-like\":_vm.afterDeleteLike}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container class=\"ma-0 pa-0\">\r\n    <!-- tweets list -->\r\n    <TweetCard\r\n      v-for=\"tweet in tweets\"\r\n      :key=\"tweet.id\"\r\n      :initial-tweet=\"tweet\"\r\n      @after-delete-like=\"afterDeleteLike\"\r\n    />\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport TweetCard from \"../components/TweetCard.vue\";\r\nimport { mapState } from \"vuex\";\r\nimport usersAPI from \"./../apis/users\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  name: \"UserLikes\",\r\n  components: {\r\n    TweetCard,\r\n  },\r\n  data() {\r\n    return {\r\n      user: {\r\n        id: -1,\r\n      },\r\n      tweets: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\"]),\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params;\r\n    this.fetchUser(id);\r\n    this.fetchLikes(id);\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    const { id } = to.params;\r\n    this.fetchUser(id);\r\n    this.fetchLikes(id);\r\n    next();\r\n  },\r\n  methods: {\r\n    async fetchUser(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getUser({ userId });\r\n\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n\r\n        const { id } = data;\r\n\r\n        this.user = {\r\n          ...this.user,\r\n          id,\r\n        };\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得使用者資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async fetchLikes(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getUserLikes({ userId });\r\n\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n\r\n        const likes = [];\r\n        data.forEach((object) => {\r\n          object = {\r\n            ...object,\r\n            isLiked: true,\r\n          };\r\n          likes.push(object);\r\n        });\r\n\r\n        this.tweets = likes;\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得使用者推文，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    afterDeleteLike(payload) {\r\n      const tweetId = payload;\r\n      if (this.currentUser.id === this.user.id) {\r\n        this.tweets = this.tweets.filter((tweet) => tweet.id !== tweetId);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserLikes.vue?vue&type=template&id=38b3ea94&\"\nimport script from \"./UserLikes.vue?vue&type=script&lang=js&\"\nexport * from \"./UserLikes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VContainer})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetCard.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"pa-3\",staticStyle:{\"border-bottom\":\"thin solid rgba(0, 0, 0, 0.12)\"},attrs:{\"flat\":\"\",\"tile\":\"\"}},[_c('v-row',{staticClass:\"pa-0\",staticStyle:{\"flex-wrap\":\"nowrap\"},attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"flex-grow-1\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.tweet.User.id } }}},[_c('v-avatar',{staticClass:\"mt-1\"},[_c('v-img',{attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.tweet.User.avatar),\"alt\":_vm.tweet.User.name}})],1)],1)],1),_c('v-col',{staticClass:\"flex-shrink-1\",attrs:{\"cols\":\"11\"}},[_c('router-link',{staticStyle:{\"text-decoration\":\"none\"},attrs:{\"to\":{ name: 'tweet', params: { id: _vm.tweet.id } }}},[_c('v-row',{staticClass:\"pa-2\",attrs:{\"no-gutters\":\"\",\"align\":\"center\"}},[_c('p',{staticClass:\"subtitle-2 font-weight-bold mr-1 my-0 pa-0\"},[_vm._v(\" \"+_vm._s(_vm.tweet.User.name)+\" \")]),_c('p',{staticClass:\"subtitle-2 grey--text font-weight-regular my-0 pa-0\"},[_vm._v(\" @\"+_vm._s(_vm.tweet.User.account)+\" \")]),_c('p',{staticClass:\"subtitle-2 font-weight-regular grey--text pa-0 my-0 ml-1\"},[_vm._v(\" ‧ \"+_vm._s(_vm._f(\"fromNow\")(_vm.tweet.createdAt))+\" \")])]),_c('v-row',{staticClass:\"font-weight-normal px-2\",attrs:{\"no-gutters\":\"\",\"align\":\"center\"}},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"12\"}},[_c('p',{staticClass:\"body-2 black--text font-weight-normal text-justify my-0\"},[_vm._v(\" \"+_vm._s(_vm.tweet.description)+\" \")])])],1)],1),_c('v-row',{staticClass:\"font-weight-normal pa-2\",attrs:{\"no-gutters\":\"\",\"align\":\"center\"}},[_c('v-col',{staticClass:\"d-flex justify-space-between mr-5\",attrs:{\"cols\":\"1\"}},[_c('div',{staticClass:\"d-flex align-center cursor-pointer\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.replyTweet.apply(null, arguments)}}},[_c('v-icon',{staticStyle:{\"font-size\":\"18px\"},attrs:{\"color\":\"grey\"}},[_vm._v(\"far fa-comment\")]),_c('p',{staticClass:\"subtitle-2 font-weight-normal grey--text pa-0 my-0 ml-2\"},[_vm._v(\" \"+_vm._s(_vm.tweet.replyCounts)+\" \")])],1)]),_c('v-col',{staticClass:\"d-flex justify-space-between ml-5\",attrs:{\"cols\":\"1\"}},[_c('div',{staticClass:\"d-flex align-center\",class:_vm.cursorStyle},[(!_vm.tweet.isLiked)?_c('v-icon',{staticStyle:{\"font-size\":\"18px\"},attrs:{\"disabled\":_vm.currentUser.id === _vm.tweet.User.id,\"color\":\"grey\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike(_vm.tweet.id)}}},[_vm._v(\"far fa-heart\")]):_c('v-icon',{staticStyle:{\"font-size\":\"18px\"},attrs:{\"disabled\":_vm.currentUser.id === _vm.tweet.User.id,\"color\":\"red\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteLike(_vm.tweet.id)}}},[_vm._v(\"fas fa-heart\")]),_c('p',{staticClass:\"subtitle-2 grey--text pa-0 my-0 ml-2\"},[_vm._v(\" \"+_vm._s(_vm.tweet.likeCounts)+\" \")])],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card\r\n    flat\r\n    tile\r\n    class=\"pa-3\"\r\n    style=\"border-bottom: thin solid rgba(0, 0, 0, 0.12)\"\r\n  >\r\n    <v-row no-gutters class=\"pa-0\" style=\"flex-wrap: nowrap\">\r\n      <v-col class=\"flex-grow-1\">\r\n        <router-link :to=\"{ name: 'user', params: { id: tweet.User.id } }\">\r\n          <v-avatar class=\"mt-1\">\r\n            <v-img\r\n              :src=\"tweet.User.avatar | emptyImage\"\r\n              :alt=\"tweet.User.name\"\r\n            ></v-img>\r\n          </v-avatar>\r\n        </router-link>\r\n      </v-col>\r\n      <v-col cols=\"11\" class=\"flex-shrink-1\">\r\n        <router-link\r\n          :to=\"{ name: 'tweet', params: { id: tweet.id } }\"\r\n          style=\"text-decoration: none\"\r\n        >\r\n          <v-row no-gutters align=\"center\" class=\"pa-2\">\r\n            <p class=\"subtitle-2 font-weight-bold mr-1 my-0 pa-0\">\r\n              {{ tweet.User.name }}\r\n            </p>\r\n            <p class=\"subtitle-2 grey--text font-weight-regular my-0 pa-0\">\r\n              @{{ tweet.User.account }}\r\n            </p>\r\n            <p class=\"subtitle-2 font-weight-regular grey--text pa-0 my-0 ml-1\">\r\n              ‧ {{ tweet.createdAt | fromNow }}\r\n            </p>\r\n          </v-row>\r\n          <v-row no-gutters align=\"center\" class=\"font-weight-normal px-2\">\r\n            <v-col cols=\"12\" class=\"ma-0 pa-0\">\r\n              <p\r\n                class=\"body-2 black--text font-weight-normal text-justify my-0\"\r\n              >\r\n                {{ tweet.description }}\r\n              </p>\r\n            </v-col>\r\n          </v-row>\r\n        </router-link>\r\n        <v-row no-gutters align=\"center\" class=\"font-weight-normal pa-2\">\r\n          <v-col cols=\"1\" class=\"d-flex justify-space-between mr-5\">\r\n            <div\r\n              class=\"d-flex align-center cursor-pointer\"\r\n              @click.stop.prevent=\"replyTweet\"\r\n            >\r\n              <v-icon color=\"grey\" style=\"font-size: 18px\"\r\n                >far fa-comment</v-icon\r\n              >\r\n              <p\r\n                class=\"subtitle-2 font-weight-normal grey--text pa-0 my-0 ml-2\"\r\n              >\r\n                {{ tweet.replyCounts }}\r\n              </p>\r\n            </div>\r\n          </v-col>\r\n          <v-col cols=\"1\" class=\"d-flex justify-space-between ml-5\">\r\n            <!-- isLiked / !isLiked -->\r\n            <div class=\"d-flex align-center\" :class=\"cursorStyle\">\r\n              <v-icon\r\n                :disabled=\"currentUser.id === tweet.User.id\"\r\n                v-if=\"!tweet.isLiked\"\r\n                color=\"grey\"\r\n                @click.stop.prevent=\"addLike(tweet.id)\"\r\n                style=\"font-size: 18px\"\r\n                >far fa-heart</v-icon\r\n              >\r\n              <v-icon\r\n                v-else\r\n                :disabled=\"currentUser.id === tweet.User.id\"\r\n                color=\"red\"\r\n                @click.stop.prevent=\"deleteLike(tweet.id)\"\r\n                style=\"font-size: 18px\"\r\n                >fas fa-heart</v-icon\r\n              >\r\n              <p class=\"subtitle-2 grey--text pa-0 my-0 ml-2\">\r\n                {{ tweet.likeCounts }}\r\n              </p>\r\n            </div>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter, emptyImageFilter } from \"./../utils/mixins\";\r\nimport { mapMutations } from \"vuex\";\r\nimport usersAPI from \"./../apis/users\";\r\nimport { Toast } from \"./../utils/helpers\";\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"TweetCard\",\r\n  props: {\r\n    initialTweet: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  mixins: [fromNowFilter, emptyImageFilter],\r\n  data() {\r\n    return {\r\n      tweet: {\r\n        ...this.initialTweet,\r\n      },\r\n      // tweetReplyDialogOpen: false,\r\n    };\r\n  },\r\n  computed: {\r\n    cursorStyle() {\r\n      return this.currentUser.id === this.tweet.User.id\r\n        ? \"cursor-normal\"\r\n        : \"cursor-pointer\";\r\n    },\r\n    ...mapState([\"currentUser\"]),\r\n  },\r\n  methods: {\r\n    replyTweet() {\r\n      // console.log(\"replyTweet\");\r\n      // 把要回覆的該則推文傳給 store\r\n      this.setTweet(this.tweet);\r\n      // this.tweetReplyDialogOpen = true;\r\n      this.setTweetReplyDialogOpen(true);\r\n    },\r\n    ...mapMutations({\r\n      setTweet: \"tweets/setTweet\",\r\n      setTweetReplyDialogOpen: \"tweets/setTweetReplyDialogOpen\",\r\n    }),\r\n    // TODO: 在個人頁面的即時更新\r\n    async addLike(tweetId) {\r\n      try {\r\n        // 只能按別人的\r\n        if (this.tweet.User.id === this.currentUser.id) {\r\n          Toast.fire({\r\n            icon: \"error\",\r\n            title: \"無法將自己的推文加入LIKE\",\r\n          });\r\n          this.isLoading = false;\r\n          return;\r\n        }\r\n        const { data } = await usersAPI.addLike({ tweetId });\r\n\r\n        if (data.status !== \"success\") {\r\n          throw new Error(data.message);\r\n        }\r\n\r\n        this.tweet = {\r\n          ...this.tweet,\r\n          isLiked: true,\r\n          likeCounts: this.tweet.likeCounts + 1,\r\n        };\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將推文加入LIKE，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async deleteLike(tweetId) {\r\n      try {\r\n        const { data } = await usersAPI.deleteLike({ tweetId });\r\n\r\n        if (data.status !== \"success\") {\r\n          throw new Error(data.message);\r\n        }\r\n\r\n        this.tweet = {\r\n          ...this.tweet,\r\n          isLiked: false,\r\n          likeCounts: this.tweet.likeCounts - 1,\r\n        };\r\n\r\n        this.$emit(\"after-delete-like\", tweetId);\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將推文移除LIKE，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.cursor-pointer {\r\n  cursor: pointer;\r\n}\r\n.cursor-normal {\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetCard.vue?vue&type=template&id=9cbdb80e&\"\nimport script from \"./TweetCard.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetCard.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VCard,VCol,VIcon,VImg,VRow})\n"],"sourceRoot":""}