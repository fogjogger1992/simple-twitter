{"version":3,"sources":["webpack:///./src/views/Chatroom.vue?7ddf","webpack:///./src/components/ChatroomUserCard.vue?12b5","webpack:///src/components/ChatroomUserCard.vue","webpack:///./src/components/ChatroomUserCard.vue?b5cc","webpack:///./src/components/ChatroomUserCard.vue","webpack:///./src/components/ChatroomMessage.vue?c4ee","webpack:///src/components/ChatroomMessage.vue","webpack:///./src/components/ChatroomMessage.vue?139a","webpack:///./src/components/ChatroomMessage.vue","webpack:///src/views/Chatroom.vue","webpack:///./src/views/Chatroom.vue?80c7","webpack:///./src/views/Chatroom.vue?3302","webpack:///./src/views/Chatroom.vue?e9e0","webpack:///../../../src/components/VTextarea/VTextarea.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","_v","_s","onlineUsers","length","_l","user","key","id","currentUser","message","on","$event","type","indexOf","_k","keyCode","preventDefault","stopPropagation","sendMessage","apply","arguments","model","value","callback","$$v","expression","staticRenderFns","name","params","_f","avatar","account","props","Object","required","mixins","data","watch","methods","component","VAvatar","VCard","VCol","VImg","VRow","isNotification","Sender","content","createdAt","VCardText","VContainer","winHeight","window","innerHeight","container","elem","scrollTop","historyMessages","components","ChatroomUserCard","ChatroomMessage","computed","mounted","scrollToBottom","document","getElementById","Math","floor","offsetHeight","fetchOnlineUsers","trim","console","log","senderId","receiverId","isPublic","$socket","emit","payload","icon","title","fetchHistoryMessages","$nextTick","sockets","connect","newUser","userJoin","push","onlineUser","userLeave","beforeDestroy","VIcon","VSpacer","VTextarea","baseMixins","autoGrow","noResize","rowHeight","Number","default","validator","v","isNaN","parseFloat","rows","parseInt","classes","noResizeHandle","lazyValue","setTimeout","calculateInputHeight","input","$refs","height","minHeight","genInput","onInput","onKeyDown","isFocused","e"],"mappings":"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","file":"js/chunk-00b1f444.18317870.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"ma-0 pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"ma-0 px-0 d-flex flex-column userlistcol\",attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-card',{staticClass:\"pa-3 align-center\",staticStyle:{\"border-bottom\":\"thin solid rgba(0, 0, 0, 0.12)\"},attrs:{\"tile\":\"\",\"flat\":\"\"}},[_vm._v(\"上線使用者 (\"+_vm._s(_vm.onlineUsers.length)+\")\")]),_c('div',{staticClass:\"onlineuserlist\"},_vm._l((_vm.onlineUsers),function(user){return _c('ChatroomUserCard',{key:user.id,attrs:{\"user\":user,\"currentUser\":_vm.currentUser}})}),1)],1),_c('v-col',{staticClass:\"ma-0 px-0 d-flex flex-column chatroomcol\",attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-card',{staticClass:\"pa-3 align-center\",staticStyle:{\"border-bottom\":\"thin solid rgba(0, 0, 0, 0.12)\"},attrs:{\"tile\":\"\",\"flat\":\"\"}},[_vm._v(\"公開聊天室\")]),_c('div',{staticClass:\"chatroom\",attrs:{\"id\":\"scroll-target\"}},[_c('div',{attrs:{\"id\":\"scrolled-content\"}},_vm._l((_vm.historyMessages),function(message){return _c('ChatroomMessage',{key:message.id,attrs:{\"message\":message,\"currentUser\":_vm.currentUser}})}),1)]),_c('v-spacer'),_c('v-card',{staticClass:\"pa-3 align-center\",staticStyle:{\"border-top\":\"thin solid rgba(0, 0, 0, 0.12)\"},attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-row',{staticClass:\"pa-0 ma-0\"},[_c('v-col',{staticClass:\"pa-0 ma-0 align-self-center\",attrs:{\"cols\":\"11\"}},[_c('v-textarea',{staticClass:\"pa-0 ma-0\",attrs:{\"hide-details\":\"\",\"rounded\":\"\",\"filled\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"label\":\"輸入訊息...\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();$event.stopPropagation();return _vm.sendMessage.apply(null, arguments)}},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_c('v-col',{staticClass:\"py-0 ma-0 px-2 align-self-center d-flex justify-center\",attrs:{\"cols\":\"1\"}},[_c('v-icon',{staticStyle:{\"font-size\":\"25px\"},attrs:{\"color\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.sendMessage.apply(null, arguments)}}},[_vm._v(\"far fa-paper-plane\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"pa-3\",staticStyle:{\"border-bottom\":\"thin solid rgba(0, 0, 0, 0.12)\"},attrs:{\"flat\":\"\",\"tile\":\"\"}},[_c('v-row',{staticClass:\"pa-0\",staticStyle:{\"flex-wrap\":\"nowrap\"},attrs:{\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"ma-0 pa-0\",attrs:{\"cols\":\"auto\"}},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.user.id } }}},[_c('v-avatar',[_c('v-img',{attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.user.avatar),\"alt\":_vm.user.name}})],1)],1)],1),_c('v-col',{staticClass:\"flex-grow-1 d-flex flex pa-2 ma-0\",attrs:{\"no-gutters\":\"\",\"cols\":\"auto\"}},[_c('v-col',{staticClass:\"ma-0 pa-0 align-self-center\",attrs:{\"cols\":\"auto\"}},[_c('p',{staticClass:\"subtitle-2 font-weight-bold ma-0 pa-0\"},[_vm._v(_vm._s(_vm.user.name))])]),_c('v-col',{staticClass:\"ma-0 pl-2 pr-0 py-0 align-self-center\"},[_c('p',{staticClass:\"subtitle-2 grey--text font-weight-normal ma-0 pa-0\",staticStyle:{\"text-decoration\":\"none\"}},[_vm._v(\" @\"+_vm._s(_vm.user.account)+\" \")])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card\r\n    flat\r\n    tile\r\n    class=\"pa-3\"\r\n    style=\"border-bottom: thin solid rgba(0, 0, 0, 0.12)\"\r\n  >\r\n    <v-row no-gutters class=\"pa-0\" style=\"flex-wrap: nowrap\">\r\n      <!-- avatar -->\r\n      <v-col cols=\"auto\" class=\"ma-0 pa-0\">\r\n        <router-link :to=\"{ name: 'user', params: { id: user.id } }\">\r\n          <v-avatar>\r\n            <v-img :src=\"user.avatar | emptyImage\" :alt=\"user.name\"></v-img>\r\n          </v-avatar>\r\n        </router-link>\r\n      </v-col>\r\n      <!-- name and account -->\r\n      <v-col no-gutters cols=\"auto\" class=\"flex-grow-1 d-flex flex pa-2 ma-0\">\r\n        <v-col cols=\"auto\" class=\"ma-0 pa-0 align-self-center\">\r\n          <p class=\"subtitle-2 font-weight-bold ma-0 pa-0\">{{ user.name }}</p>\r\n        </v-col>\r\n        <v-col class=\"ma-0 pl-2 pr-0 py-0 align-self-center\">\r\n          <p\r\n            class=\"subtitle-2 grey--text font-weight-normal ma-0 pa-0\"\r\n            style=\"text-decoration: none\"\r\n          >\r\n            @{{ user.account }}\r\n          </p>\r\n        </v-col>\r\n      </v-col>\r\n    </v-row>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { emptyImageFilter } from \"./../utils/mixins\";\r\n\r\nexport default {\r\n  name: \"ChatroomUserCard\",\r\n  props: {\r\n    currentUser: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    user: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  mixins: [emptyImageFilter],\r\n  data() {\r\n    return {};\r\n  },\r\n  watch: {\r\n    // user: {\r\n    //   handler: function (newValue) {\r\n    //     this.user = {\r\n    //       ...this.user,\r\n    //       ...newValue,\r\n    //     };\r\n    //   },\r\n    //   deep: true,\r\n    //   immediate: true,\r\n    // },\r\n  },\r\n  methods: {},\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomUserCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomUserCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatroomUserCard.vue?vue&type=template&id=3616cd86&\"\nimport script from \"./ChatroomUserCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatroomUserCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VCard,VCol,VImg,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"ma-0 pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"d-flex flex-column ma-0 pa-0\",attrs:{\"no-gutters\":\"\"}},[(_vm.message.isNotification)?_c('v-col',{staticClass:\"ma-0 pa-0 justify-center\",attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"ma-0 pa-0 justify-center\"},[_c('v-col',{staticClass:\"py-2\",attrs:{\"cols\":\"auto\"}},[_c('v-card',{staticClass:\"ma-0 pa-0 rounded-pill\",attrs:{\"flat\":\"\",\"color\":\"grey lighten-1\"}},[_c('v-card-text',{staticClass:\"grey--text text--darken-2 py-0\"},[_c('strong',{staticClass:\"ma-0\",staticStyle:{\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm.message.name)+\" 上線\")])])],1)],1)],1)],1):(\n        !_vm.message.isNotification && _vm.message.Sender.id !== this.currentUser.id\n      )?_c('v-col',{staticClass:\"ma-0 px-3 pt-3\",attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"ma-0 pa-0 align-end\",staticStyle:{\"flex-wrap\":\"nowrap\"}},[_c('v-col',{staticClass:\"px-0 ma-0 pb-1\",attrs:{\"cols\":\"auto\"}},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.message.Sender.id } }}},[_c('v-avatar',[_c('v-img',{attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.message.Sender.avatar),\"alt\":_vm.message.Sender.name}})],1)],1)],1),_c('v-col',{staticClass:\"flex-shrink-1 pb-1\",attrs:{\"cols\":\"auto\"}},[_c('v-card',{staticClass:\"rounded-br-xl rounded-bl-0 rounded-tr-xl rounded-tl-xl\",attrs:{\"flat\":\"\",\"color\":\"grey lighten-1\"}},[_c('v-card-text',{staticClass:\"black--text\"},[_c('p',{staticClass:\"ma-0\"},[_vm._v(\" \"+_vm._s(_vm.message.content)+\" \")])])],1)],1),_c('v-col',{staticClass:\"flex-shrink-0\",attrs:{\"cols\":\"4\"}})],1),_c('v-row',{staticClass:\"ma-0 py-0\",staticStyle:{\"padding-left\":\"48px\"}},[_c('p',{staticClass:\"caption grey--text ma-0 px-3\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(_vm.message.createdAt))+\" \")])])],1):_c('v-col',{staticClass:\"ma-0 px-3\",attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"ma-0 pa-0 justify-space-between\",staticStyle:{\"flex-wrap\":\"nowrap\"}},[_c('v-col',{staticClass:\"flex-shrink-0 pb-1\",attrs:{\"cols\":\"5\"}}),_c('v-col',{staticClass:\"flex-shrink-1 pb-1\",attrs:{\"cols\":\"auto\"}},[_c('v-card',{staticClass:\"rounded-br-0 rounded-bl-xl rounded-tr-xl rounded-tl-xl\",attrs:{\"flat\":\"\",\"color\":\"primary\"}},[_c('v-card-text',{staticClass:\"white--text\"},[_c('p',{staticClass:\"ma-0\"},[_vm._v(\" \"+_vm._s(_vm.message.content)+\" \")])])],1)],1)],1),_c('v-row',{staticClass:\"ma-0 py-0 justify-end\"},[_c('p',{staticClass:\"caption text-right grey--text ma-0 px-3\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(_vm.message.createdAt))+\" \")])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid class=\"ma-0 pa-0\">\r\n    <v-row no-gutters class=\"d-flex flex-column ma-0 pa-0\">\r\n      <!-- online, offline notification -->\r\n      <v-col\r\n        v-if=\"message.isNotification\"\r\n        cols=\"12\"\r\n        class=\"ma-0 pa-0 justify-center\"\r\n      >\r\n        <v-row class=\"ma-0 pa-0 justify-center\">\r\n          <v-col cols=\"auto\" class=\"py-2\">\r\n            <v-card flat color=\"grey lighten-1\" class=\"ma-0 pa-0 rounded-pill\">\r\n              <v-card-text class=\"grey--text text--darken-2 py-0\">\r\n                <strong class=\"ma-0\" style=\"font-size: 12px\"\r\n                  >{{ message.name }} 上線</strong\r\n                >\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n      <!-- message from others -->\r\n      <v-col\r\n        v-else-if=\"\r\n          !message.isNotification && message.Sender.id !== this.currentUser.id\r\n        \"\r\n        cols=\"12\"\r\n        class=\"ma-0 px-3 pt-3\"\r\n      >\r\n        <v-row class=\"ma-0 pa-0 align-end\" style=\"flex-wrap: nowrap\">\r\n          <v-col cols=\"auto\" class=\"px-0 ma-0 pb-1\">\r\n            <!-- avatar -->\r\n            <router-link\r\n              :to=\"{ name: 'user', params: { id: message.Sender.id } }\"\r\n            >\r\n              <v-avatar>\r\n                <v-img\r\n                  :src=\"message.Sender.avatar | emptyImage\"\r\n                  :alt=\"message.Sender.name\"\r\n                ></v-img>\r\n              </v-avatar>\r\n            </router-link>\r\n          </v-col>\r\n          <v-col cols=\"auto\" class=\"flex-shrink-1 pb-1\">\r\n            <v-card\r\n              flat\r\n              color=\"grey lighten-1\"\r\n              class=\"rounded-br-xl rounded-bl-0 rounded-tr-xl rounded-tl-xl\"\r\n            >\r\n              <v-card-text class=\"black--text\">\r\n                <p class=\"ma-0\">\r\n                  {{ message.content }}\r\n                </p>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n          <v-col cols=\"4\" class=\"flex-shrink-0\"></v-col>\r\n        </v-row>\r\n        <v-row class=\"ma-0 py-0\" style=\"padding-left: 48px\">\r\n          <p class=\"caption grey--text ma-0 px-3\">\r\n            {{ message.createdAt | fromNow }}\r\n          </p>\r\n        </v-row>\r\n      </v-col>\r\n      <!-- self message -->\r\n      <v-col v-else cols=\"12\" class=\"ma-0 px-3\">\r\n        <v-row\r\n          class=\"ma-0 pa-0 justify-space-between\"\r\n          style=\"flex-wrap: nowrap\"\r\n        >\r\n          <v-col cols=\"5\" class=\"flex-shrink-0 pb-1\"> </v-col>\r\n          <v-col cols=\"auto\" class=\"flex-shrink-1 pb-1\">\r\n            <v-card\r\n              flat\r\n              color=\"primary\"\r\n              class=\"rounded-br-0 rounded-bl-xl rounded-tr-xl rounded-tl-xl\"\r\n            >\r\n              <v-card-text class=\"white--text\">\r\n                <p class=\"ma-0\">\r\n                  {{ message.content }}\r\n                </p>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row class=\"ma-0 py-0 justify-end\">\r\n          <p class=\"caption text-right grey--text ma-0 px-3\">\r\n            {{ message.createdAt | fromNow }}\r\n          </p>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter, emptyImageFilter } from \"../utils/mixins\";\r\n\r\nexport default {\r\n  name: \"ChatroomMessage\",\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    currentUser: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  mixins: [fromNowFilter, emptyImageFilter],\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatroomMessage.vue?vue&type=template&id=e61d8d26&\"\nimport script from \"./ChatroomMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatroomMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VCard,VCardText,VCol,VContainer,VImg,VRow})\n","<template>\r\n  <v-container fluid class=\"ma-0 pa-0\">\r\n    <v-row no-gutters>\r\n      <v-col cols=\"12\" md=\"4\" class=\"ma-0 px-0 d-flex flex-column userlistcol\">\r\n        <v-card\r\n          tile\r\n          flat\r\n          class=\"pa-3 align-center\"\r\n          style=\"border-bottom: thin solid rgba(0, 0, 0, 0.12)\"\r\n          >上線使用者 ({{ onlineUsers.length }})</v-card\r\n        >\r\n        <!-- online user list -->\r\n        <div class=\"onlineuserlist\">\r\n          <ChatroomUserCard\r\n            v-for=\"user in onlineUsers\"\r\n            :key=\"user.id\"\r\n            :user=\"user\"\r\n            :currentUser=\"currentUser\"\r\n          />\r\n        </div>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"8\" class=\"ma-0 px-0 d-flex flex-column chatroomcol\">\r\n        <v-card\r\n          tile\r\n          flat\r\n          class=\"pa-3 align-center\"\r\n          style=\"border-bottom: thin solid rgba(0, 0, 0, 0.12)\"\r\n          >公開聊天室</v-card\r\n        >\r\n        <!-- chatroom -->\r\n        <div class=\"chatroom\" id=\"scroll-target\">\r\n          <div id=\"scrolled-content\">\r\n            <ChatroomMessage\r\n              v-for=\"message in historyMessages\"\r\n              :key=\"message.id\"\r\n              :message=\"message\"\r\n              :currentUser=\"currentUser\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <v-spacer></v-spacer>\r\n        <!-- input -->\r\n        <v-card\r\n          tile\r\n          flat\r\n          class=\"pa-3 align-center\"\r\n          style=\"border-top: thin solid rgba(0, 0, 0, 0.12)\"\r\n        >\r\n          <v-row class=\"pa-0 ma-0\">\r\n            <v-col cols=\"11\" class=\"pa-0 ma-0 align-self-center\">\r\n              <v-textarea\r\n                @keydown.enter.prevent.stop=\"sendMessage\"\r\n                v-model=\"message\"\r\n                class=\"pa-0 ma-0\"\r\n                hide-details\r\n                rounded\r\n                filled\r\n                auto-grow\r\n                rows=\"1\"\r\n                label=\"輸入訊息...\"\r\n              ></v-textarea>\r\n            </v-col>\r\n            <v-col\r\n              cols=\"1\"\r\n              class=\"py-0 ma-0 px-2 align-self-center d-flex justify-center\"\r\n            >\r\n              <v-icon\r\n                @click.prevent.stop=\"sendMessage\"\r\n                color=\"primary\"\r\n                style=\"font-size: 25px\"\r\n                >far fa-paper-plane</v-icon\r\n              >\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<style scoped>\r\n.userlistcol {\r\n  border-right: thin solid rgba(0, 0, 0, 0.12);\r\n  height: 100vh;\r\n}\r\n.chatroomcol {\r\n  border-right: thin solid rgba(0, 0, 0, 0.12);\r\n  height: 100vh;\r\n}\r\n.onlineuserlist,\r\n.chatroom {\r\n  overflow-y: scroll;\r\n  -ms-overflow-style: none; /* IE and Edge */\r\n  scrollbar-width: none; /* Firefox */\r\n}\r\n/* Hide scrollbar for Chrome, Safari and Opera */\r\n.onlineuserlist::-webkit-scrollbar,\r\n.chatroom::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport ChatroomUserCard from \"../components/ChatroomUserCard.vue\";\r\nimport ChatroomMessage from \"../components/ChatroomMessage.vue\";\r\nimport { mapState } from \"vuex\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  name: \"Chatroom\",\r\n  data() {\r\n    return {\r\n      winHeight: window.innerHeight * 0.7 + \"px\",\r\n      container: null,\r\n      elem: null,\r\n      scrollTop: 9999,\r\n      onlineUsers: [],\r\n      historyMessages: [],\r\n      message: \"\",\r\n    };\r\n  },\r\n  components: {\r\n    ChatroomUserCard,\r\n    ChatroomMessage,\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\"]),\r\n  },\r\n  async created() {\r\n    this.fetchOnlineUsers();\r\n    // 同時與聊天室連線\r\n    this.$socket.connect();\r\n    // 一進入聊天室，顯示user上線，載入歷史訊息\r\n    const payload = {\r\n      id: this.currentUser.id,\r\n      name: this.currentUser.name,\r\n      account: this.currentUser.account,\r\n      avatar: this.currentUser.avatar,\r\n    };\r\n    this.$socket.emit(\"newUser\", payload);\r\n  },\r\n  mounted: function () {},\r\n  methods: {\r\n    scrollToBottom() {\r\n      this.elem = document.getElementById(\"scrolled-content\");\r\n      this.container = document.getElementById(\"scroll-target\");\r\n      this.container.scrollTop = Math.floor(this.elem.offsetHeight);\r\n    },\r\n    fetchOnlineUsers(data) {\r\n      this.onlineUsers = data;\r\n    },\r\n    sendMessage() {\r\n      if (!this.message) {\r\n        Toast.fire({\r\n          icon: \"warning\",\r\n          title: \"請輸入訊息\",\r\n        });\r\n        return;\r\n      }\r\n      if (!this.message.trim()) {\r\n        Toast.fire({\r\n          icon: \"warning\",\r\n          title: \"請輸入空格以外的訊息\",\r\n        });\r\n        return;\r\n      }\r\n      console.log(\"傳入的訊息： \", this.message);\r\n\r\n      const payload = {\r\n        senderId: this.currentUser.id,\r\n        receiverId: null,\r\n        content: this.message,\r\n        isPublic: true,\r\n      };\r\n\r\n      this.$socket.emit(\"sendMessage\", payload);\r\n      this.message = \"\";\r\n    },\r\n    fetchHistoryMessages(data) {\r\n      this.historyMessages = data;\r\n      // scroll to bottom\r\n      this.$nextTick(() => {\r\n        this.scrollToBottom();\r\n      });\r\n    },\r\n  },\r\n  sockets: {\r\n    connect() {\r\n      console.log(\"connect\");\r\n    },\r\n    newUser(data) {\r\n      console.log(\"newUser: \", data);\r\n    },\r\n    userJoin(data) {\r\n      console.log(\"userJoin: \", data);\r\n      this.historyMessages.push({\r\n        ...data,\r\n        isNotification: true,\r\n      });\r\n      // scroll to bottom\r\n      this.$nextTick(() => {\r\n        this.scrollToBottom();\r\n      });\r\n    },\r\n    onlineUser(data) {\r\n      // 取得上線用戶資料\r\n      console.log(\"onlineUser: \", data);\r\n      this.fetchOnlineUsers(data);\r\n    },\r\n    historyMessages(data) {\r\n      console.log(\"historyMessages: \", data);\r\n      this.fetchHistoryMessages(data);\r\n    },\r\n    async newMessage(data) {\r\n      console.log(\"newMessage: \", data);\r\n      this.historyMessages.push({\r\n        ...data[0],\r\n      });\r\n      // scroll to bottom\r\n      this.$nextTick(() => {\r\n        this.scrollToBottom();\r\n      });\r\n    },\r\n    userLeave(data) {\r\n      // 取得成員離開聊天室訊息\r\n      console.log(\"userLeave: \", data);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    // 離開聊天室\r\n    // this.$socket.disconnect();\r\n    this.$socket.emit('leavingChatroom')\r\n    console.log(\"離開聊天室\");\r\n  },\r\n};\r\n</script> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chatroom.vue?vue&type=template&id=37b52232&scoped=true&\"\nimport script from \"./Chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./Chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chatroom.vue?vue&type=style&index=0&id=37b52232&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37b52232\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VCol,VContainer,VIcon,VRow,VSpacer,VTextarea})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=style&index=0&id=37b52232&scoped=true&lang=css&\"","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n"],"sourceRoot":""}