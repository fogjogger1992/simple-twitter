(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da15ce6a"],{"264d":function(t,e,a){},6783:function(t,e,a){"use strict";var s=a("2fa3");e["a"]={getTweets:function(){return s["b"].get("/tweets")},createTweet:function(t){var e=t.tweetData;return s["b"].post("/tweets",e)},getTweet:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e))},getTweetReplies:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e,"/replies"))}}},"6d4d":function(t,e,a){"use strict";a("264d")},"6f1a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"ma-0 pa-0 d-flex flex-column main"},[a("v-card",{staticClass:"pa-3 align-center",staticStyle:{"border-bottom":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{tile:"",flat:""}},[a("v-row",{staticClass:"ma-0 pa-0 align-center",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"1"}},[a("v-icon",{on:{click:function(e){return t.$router.back()}}},[t._v("mdi-arrow-left")])],1),a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"auto"}},[t._v(" 推文 ")])],1)],1),a("v-card",{staticClass:"pa-3 d-flex",attrs:{flat:"",tile:""}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[a("v-col",{staticClass:"pa-0 flex-column",attrs:{"no-gutters":""}},[a("v-row",{staticClass:"py-2",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"auto"}},[a("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.User.id}}}},[a("v-avatar",{staticClass:"mt-1"},[a("v-img",{attrs:{src:t._f("emptyImage")(t.tweet.User.avatar),alt:t.tweet.User.name}})],1)],1)],1),a("v-col",{staticClass:"pa-2",attrs:{"no-gutters":""}},[a("p",{staticClass:"subtitle-2 black--text font-weight-bold my-0 pa-0"},[t._v(" "+t._s(t.tweet.User.name)+" ")]),a("p",{staticClass:"subtitle-2 grey--text font-weight-normal my-0 pa-0"},[t._v(" @"+t._s(t.tweet.User.account)+" ")])])],1),a("v-row",{staticClass:"py-2",attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[a("h2",{staticClass:"my-0 font-weight-regular"},[t._v(" "+t._s(t.tweet.description)+" ")])])],1),a("v-row",{staticClass:"pt-0 py-2",attrs:{"no-gutters":""}},[a("p",{staticClass:"subtitle-2 font-weight-normal grey--text pa-0 my-0 ml-1"},[t._v(" "+t._s(t._f("fromNow")(t.tweet.createdAt))+" ")])])],1)],1)],1),a("v-card",{staticClass:"mx-3 py-3 align-center grey--text",staticStyle:{"font-size":"16px","border-bottom":"thin solid rgba(0, 0, 0, 0.12)","border-top":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{tile:"",flat:""}},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"2"}},[a("span",{staticClass:"black--text"},[t._v(t._s(t.tweet.replyCounts))]),t._v(" 回覆")]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"10"}},[a("span",{staticClass:"black--text"},[t._v(t._s(t.tweet.likeCounts))]),t._v(" 喜歡次數")])],1)],1),a("v-card",{staticClass:"pa-3 align-center grey--text",staticStyle:{"border-bottom":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{tile:"",flat:""}},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"2"}},[a("v-icon",{staticStyle:{"font-size":"20px"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.replyTweet.apply(null,arguments)}}},[t._v("far fa-comment")])],1),a("v-col",{staticClass:"pa-0 ma-0",class:t.cursorStyle,attrs:{cols:"10"}},[t.tweet.isLiked?a("v-icon",{staticStyle:{"font-size":"20px"},attrs:{disabled:t.currentUser.id===t.tweet.User.id,color:"red"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(t.tweet.id)}}},[t._v("fas fa-heart")]):a("v-icon",{staticClass:"grey--text",staticStyle:{"font-size":"20px"},attrs:{disabled:t.currentUser.id===t.tweet.User.id},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(t.tweet.id)}}},[t._v("far fa-heart")])],1)],1)],1),a("div",{staticClass:"replylist"},t._l(t.replies,(function(e){return a("v-card",{key:e.id,staticClass:"pa-3",staticStyle:{"border-bottom":"thin solid rgba(0, 0, 0, 0.12)"},attrs:{flat:"",tile:""}},[a("v-row",{staticClass:"pa-0",staticStyle:{"flex-wrap":"nowrap"},attrs:{"no-gutters":""}},[a("v-col",{staticClass:"flex-grow-1"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.User.id}}}},[a("v-avatar",{staticClass:"mt-1"},[a("v-img",{attrs:{src:t._f("emptyImage")(e.User.avatar),alt:e.User.name}})],1)],1)],1),a("v-col",{staticClass:"flex-shrink-1",attrs:{cols:"11"}},[a("v-row",{staticClass:"pa-2",attrs:{"no-gutters":"",align:"center"}},[a("p",{staticClass:"subtitle-2 font-weight-bold mr-1 my-0 pa-0"},[t._v(" "+t._s(e.User.name)+" ")]),a("router-link",{staticClass:"subtitle-2 grey--text font-weight-normal pa-0",staticStyle:{"text-decoration":"none"},attrs:{to:{name:"user",params:{id:e.User.id}}}},[t._v(" @"+t._s(e.User.account)+" ")]),a("p",{staticClass:"subtitle-2 font-weight-normal grey--text pa-0 my-0 ml-1"},[t._v(" ‧ "+t._s(t._f("fromNow")(e.createdAt))+" ")])],1),a("v-row",{staticClass:"font-weight-normal px-2 mb-2",attrs:{"no-gutters":"",align:"center"}},[a("p",{staticClass:"body-2 font-weight-normal text-justify grey--text my-0"},[t._v(" 回覆 "),a("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"user",params:{id:t.tweet.User.id}}}},[t._v("@"+t._s(t.tweet.User.name))])],1)]),a("v-row",{staticClass:"font-weight-normal px-2",attrs:{"no-gutters":"",align:"center"}},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"12"}},[a("p",{staticClass:"body-2 font-weight-normal text-justify my-0"},[t._v(" "+t._s(e.comment)+" ")])])],1)],1)],1)],1)})),1)],1)},r=[],n=a("1da1"),i=a("5530"),c=(a("96cf"),a("a4d3"),a("e01a"),a("2708")),o=a("6783"),l=a("4cce"),u=a("2fa3"),p=a("2f62"),d={name:"Tweet",mixins:[c["b"],c["a"]],data:function(){return{tweet:{id:-1,description:"",replyCounts:3,likeCounts:0,createdAt:"",isLike:!1,User:{id:-1,name:"",account:"",avatar:""}},replies:[]}},created:function(){var t=this.$route.params.id;this.fetchTweet(t),this.fetchReplies(t)},beforeRouteUpdate:function(t,e,a){var s=t.params.id;this.fetchTweet(s),this.fetchReplies(s),a()},methods:Object(i["a"])({fetchTweet:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n,c,l,p,d,w,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].getTweet({tweetId:t});case 3:if(s=a.sent,r=s.data,"error"!==r.status){a.next=7;break}throw new Error(r.message);case 7:n=r.id,c=r.description,l=r.replyCounts,p=r.likeCounts,d=r.createdAt,w=r.isLiked,f=r.User,e.tweet=Object(i["a"])(Object(i["a"])({},e.tweet),{},{id:n,description:c,replyCounts:l,likeCounts:p,createdAt:d,isLiked:w,User:f}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},fetchReplies:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].getTweetReplies({tweetId:t});case 3:if(s=a.sent,r=s.data,"error"!==r.status){a.next=7;break}throw new Error(r.message);case 7:e.replies=r,a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),u["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},addLike:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.tweet.User.id!==e.currentUser.id){a.next=5;break}return u["a"].fire({icon:"error",title:"無法將自己的推文加入LIKE"}),e.isLoading=!1,a.abrupt("return");case 5:return a.next=7,l["a"].addLike({tweetId:t});case 7:if(s=a.sent,r=s.data,"success"===r.status){a.next=11;break}throw new Error(r.message);case 11:e.tweet=Object(i["a"])(Object(i["a"])({},e.tweet),{},{isLiked:!0,likeCounts:e.tweet.likeCounts+1}),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),console.log("error",a.t0),u["a"].fire({icon:"error",title:"無法將推文加入LIKE，請稍後再試"});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},deleteLike:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].deleteLike({tweetId:t});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:e.tweet=Object(i["a"])(Object(i["a"])({},e.tweet),{},{isLiked:!1,likeCounts:e.tweet.likeCounts-1}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log("error",a.t0),u["a"].fire({icon:"error",title:"無法將推文移除LIKE，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},replyTweet:function(){this.setTweetReplyDialogOpen(!0),this.setTweet(this.tweet)}},Object(p["c"])({setTweet:"tweets/setTweet",setTweetReplyDialogOpen:"tweets/setTweetReplyDialogOpen"})),computed:Object(i["a"])({cursorStyle:function(){return this.currentUser.id===this.tweet.User.id?"cursor-normal":"cursor-pointer"}},Object(p["d"])(["currentUser"]))},w=d,f=(a("9c2d"),a("6d4d"),a("2877")),m=a("6544"),v=a.n(m),g=a("8212"),b=a("b0af"),h=a("62ad"),C=a("a523"),k=a("132d"),y=a("adda"),x=a("0fd9"),_=Object(f["a"])(w,s,r,!1,null,"68685a80",null);e["default"]=_.exports;v()(_,{VAvatar:g["a"],VCard:b["a"],VCol:h["a"],VContainer:C["a"],VIcon:k["a"],VImg:y["a"],VRow:x["a"]})},"9c2d":function(t,e,a){"use strict";a("c898")},c898:function(t,e,a){}}]);
//# sourceMappingURL=chunk-da15ce6a.b8bb771c.js.map